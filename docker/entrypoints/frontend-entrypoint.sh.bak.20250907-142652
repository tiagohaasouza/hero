#!/bin/sh
set -e
mkdir -p /usr/src/app
cd /usr/src/app
# install once
STAMP=.first-boot.done
if [ ! -f "$STAMP" ]; then
  if [ -f package-lock.json ]; then npm ci || npm install; else npm install; fi
  touch "$STAMP"
fi
HOST="${VITE_HOST:-0.0.0.0}"
PORT="${VITE_PORT:-3000}"
exec npm run dev -- --host "$HOST" --port "$PORT"
